<!DOCTYPE html>
<!--
This is an example of printing "Hello World!" on the screen using react-transact.
-->
<html>
<head>
  <title>React Transact Hello World</title>
</head>
<body>
<div id="app"></div>
<script src="https://npmcdn.com/react@15.0.2/dist/react.js"></script>
<script src="https://npmcdn.com/react-dom@15.0.2/dist/react-dom.js"></script>
<script src="../../umd/ReactTransact.js"></script>
<script>
  var h = React.createElement

  // Creates a function that returns a Task when invoked.
  var sendMessage = ReactTransact.taskCreator(
    'ERROR', 'MESSAGE', function (x) { return x }
  )

  // Wrap the HelloWorld component with @transact decorator.
  var HelloWorld = ReactTransact.transact(
    function () { return [ sendMessage('Hello World!') ] }
  )(
    // The state prop is coming from RunContext.
    function (props) {
      return h('h1', {}, [props.transact.store.getState().message])
    }
  )

  // Reducer for our RunContext's local component state. (no redux!)
  function stateReducer(state, action) {
    if (action.type === 'MESSAGE') {
      return { message: action.payload }
    } else {
      return (state || {})
    }
  }

  ReactDOM.render(
    h(ReactTransact.RunContext, { stateReducer },
      h(HelloWorld)
    ),
    document.getElementById('app')
  )
</script>
</body>
</html>
